<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Memory Spiel</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #1e1e1e;
    color: white;
    margin: 0;
    padding: 10px;
    text-align: center;
  }

  h1 { margin-bottom: 5px; }

  #scoreboard {
    display: flex;
    justify-content: space-around;
    margin-bottom: 10px;
    font-size: 18px;
  }

  #current {
    margin-bottom: 10px;
    font-weight: bold;
  }

  #game {
    display: grid;
    grid-template-columns: repeat(8, 70px);
    gap: 4px;
    justify-content: center;
    max-width: calc(8 * 70px + 7 * 4px);
    margin: 0 auto;
  }

  .card {
    width: 70px;
    height: 70px;
    background: #444;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
  }

  .card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
    display: none;
    user-select: none;
  }

  .card.flipped img { display: block; }
  .card.matched {
    background: #2ecc71;
    cursor: default;
  }

  @media (max-width: 900px) {
    #game {
      grid-template-columns: repeat(6, 60px);
      gap: 3px;
      max-width: calc(6 * 60px + 5 * 3px);
    }
    .card { width: 60px; height: 60px; }
  }

  @media (max-width: 500px) {
    #game {
      grid-template-columns: repeat(4, 55px);
      gap: 2px;
      max-width: calc(4 * 55px + 3 * 2px);
    }
    .card { width: 55px; height: 55px; }
  }
</style>
</head>

<body>

<h1>Memory</h1>

<div id="scoreboard">
  <div>Spieler 1: <span id="p1">0</span></div>
  <div>Spieler 2: <span id="p2">0</span></div>
</div>

<div id="current"></div>

<div id="game"></div>

<script>
const imageCount = 24;
let cards = [];
let flipped = [];
let lock = false;
let currentPlayer = 1;
let scores = {1: 0, 2: 0};

let gameMode = "two";
let timer = 0;
let timerInterval = null;

const game = document.getElementById("game");
const currentText = document.getElementById("current");

// Spielmodus wÃ¤hlen
if (confirm("OK = 1 Spieler (auf Zeit)\nAbbrechen = 2 Spieler")) {
  gameMode = "one";
  document.getElementById("scoreboard").style.display = "none";
  currentText.textContent = "Zeit: 0 Sek.";
  timerInterval = setInterval(() => {
    timer++;
    currentText.textContent = `Zeit: ${timer} Sek.`;
  }, 1000);
} else {
  currentText.textContent = "Am Zug: Spieler 1";
}

// Karten vorbereiten
for (let i = 1; i <= imageCount; i++) {
  cards.push(i, i);
}

cards.sort(() => 0.5 - Math.random());

// Karten erstellen
cards.forEach(num => {
  const card = document.createElement("div");
  card.className = "card";
  card.dataset.value = num;

  const img = document.createElement("img");
  img.src = `images/${num}.jpg`;
  img.alt = "Memory Karte";

  card.appendChild(img);
  card.addEventListener("click", () => flipCard(card));
  game.appendChild(card);
});

function flipCard(card) {
  if (lock || card.classList.contains("flipped") || card.classList.contains("matched")) return;

  card.classList.add("flipped");
  flipped.push(card);

  if (flipped.length === 2) {
    lock = true;
    setTimeout(checkMatch, 800);
  }
}

function checkMatch() {
  const [a, b] = flipped;

  if (a.dataset.value === b.dataset.value) {
    a.classList.add("matched");
    b.classList.add("matched");

    if (gameMode === "two") {
      scores[currentPlayer]++;
      updateScores();
    }
  } else {
    a.classList.remove("flipped");
    b.classList.remove("flipped");

    if (gameMode === "two") {
      currentPlayer = currentPlayer === 1 ? 2 : 1;
    }
  }

  flipped = [];
  lock = false;

  if (gameMode === "two") {
    currentText.textContent = `Am Zug: Spieler ${currentPlayer}`;
  }

  // Spielende prÃ¼fen
  const matched = document.querySelectorAll(".matched").length;
  if (matched === imageCount * 2) {
    if (gameMode === "one") {
      clearInterval(timerInterval);
      setTimeout(() => {
        alert(`Geschafft! ðŸŽ‰\nZeit: ${timer} Sekunden`);
      }, 300);
    } else {
      let winner =
        scores[1] > scores[2]
          ? "Spieler 1 gewinnt! ðŸŽ‰"
          : scores[2] > scores[1]
          ? "Spieler 2 gewinnt! ðŸŽ‰"
          : "Unentschieden! ðŸ¤";

      setTimeout(() => {
        alert(winner);
      }, 300);
    }
  }
}

function updateScores() {
  document.getElementById("p1").textContent = scores[1];
  document.getElementById("p2").textContent = scores[2];
}
</script>

</body>
</html>
